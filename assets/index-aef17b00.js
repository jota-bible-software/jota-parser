(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=e(t);fetch(t.href,s)}})();const V="modulepreload",q=function(n){return"/jota-bible-reference-parser/"+n},N={},h=function(o,e,r){if(!e||e.length===0)return o();const t=document.getElementsByTagName("link");return Promise.all(e.map(s=>{if(s=q(s),s in N)return;N[s]=!0;const c=s.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!r)for(let i=t.length-1;i>=0;i--){const u=t[i];if(u.href===s&&(!c||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const a=document.createElement("link");if(a.rel=c?"stylesheet":V,c||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),c)return new Promise((i,u)=>{a.addEventListener("load",i),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>o())},j=(n,o)=>{const e=n[o];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((r,t)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})},P="\\s*",F=":;/,. ",Z="[^0-9A-Za-zZąćęłńóśźżĄĘŁŃÓŚŹŻ]",O="";class z{constructor(o){this.options=o;const e=o.locales;if(!e||e.length===0)throw new Error("No locales in the options.")}parse(o){let e=o;const r=[];return this.options.locales.forEach(t=>{e=K(e,r,t.bookMatchers),e=e.replace(new RegExp(O,"g"),"")}),r}}function K(n,o,e){let r=n;for(let l=e.length;l-- >0;){const g=e[l],a=`(${Z}|^)(?<book>${g})(?=[${F}]+\\d|\\d)`,i=new RegExp(a,"gi");r=r.replace(i,`${O}${l} `)}let t;const s=`${O}(?<book>\\d+)[:;/,. ]*(?<firstChapter>\\d+)((?<chapterDelimiterMatch>[:;/,. ]+)(?<tail>[:;/,. \\-–\\d]*))?`,c=new RegExp(s,"gi");for(let l;l=c.exec(r);){const{book:g,firstChapter:a,chapterDelimiterMatch:i,tail:u}=l.groups,d=parseInt(g),p=i?i.substring(0,1):"",$=i?"\\"+p:p,R=a+p+(u??""),m=`(?<chapter>\\d+)${P}${$}(?<verses>.*?((?=\\d+${$}\\s*\\d)|\\n|$))?`,v=new RegExp(m,"gi");for(let y;y=v.exec(R);){const{chapter:b,verses:f}=y.groups,_=parseInt(b),k=`(?<start>\\d+)(${P}[\\-–]${P}(?<end>\\d+))?`,I=new RegExp(k,"gi");let E=!1;if(f)for(let J;J=I.exec(f);){E=!0;const{start:B,end:A}=J.groups;if(!isNaN(B)){const L=[d,_];L.push(parseInt(B)),isNaN(A)||L.push(parseInt(A)),f.match(/[-–]\s*$/)?t||(t=L):t?o.push([t,L]):o.push(L)}}E||(U(d)?o.push([d,1,_]):o.push([d,_]))}}return r}function U(n){return[30,56,62,63,64].includes(n)}const W=["en","pl"];let x=navigator.languages[0].substring(0,2);W.includes(x)||(x="en");let C;const M=new bcv_parser;M.include_apocrypha(!0);const G=["Gen","Exod","Lev","Num","Deut","Josh","Judg","Ruth","1Sam","2Sam","1Kgs","2Kgs","1Chr","2Chr","Ezra","Neh","Esth","Job","Ps","Prov","Eccl","Song","Isa","Jer","Lam","Ezek","Dan","Hos","Joel","Amos","Obad","Jonah","Mic","Nah","Hab","Zeph","Hag","Zech","Mal","Matt","Mark","Luke","John","Acts","Rom","1Cor","2Cor","Gal","Eph","Phil","Col","1Thess","2Thess","1Tim","2Tim","Titus","Phlm","Heb","Jas","1Pet","2Pet","1John","2John","3John","Jude","Rev","Jdt","Tob","1Macc","2Macc","Wis","Sir","Bar"];let T;async function H(n,o){let e,r;o?(e=await h(()=>import("./parser-en-dd1d5caa.js"),[]),r=(await h(()=>import("./data-common-d6beee56.js"),[])).data):(e=await j(Object.assign({"./src/parser-en.js":()=>h(()=>import("./parser-en-dd1d5caa.js"),[]),"./src/parser-pl.js":()=>h(()=>import("./parser-pl-fe8f9566.js"),[])}),`./src/parser-${n}.js`),r=(await j(Object.assign({"./test/data-common.js":()=>h(()=>import("./data-common-d6beee56.js"),[]),"./test/data-en.js":()=>h(()=>import("./data-en-dc6fc1dc.js"),[]),"./test/data-pl.js":()=>h(()=>import("./data-pl-aa131f9b.js"),[])}),`./test/data-${n}.js`)).data),C=new z({locales:[e]});let t=0,s=0,c=0,l=0;const g=r.map($=>{const R=$.cases.map(m=>{let v=performance.now();const y=C.parse(m.input);v=performance.now()-v;const b=JSON.stringify(y)==JSON.stringify(m.expectedOutput);b||t++;let f=performance.now();M.parse(m.input);const _=M.osis();f=performance.now()-f;const k=_.replace(",",", ").replace("-"," - "),I=S(m.expectedOutput),E=k==I;return E||s++,b&&E&&(c+=v,l+=f),`
      <div> ${m.input} </div>
      <div class="jota">${w(b)} ${S(y)} </div>
      <div class="bcv">${w(E)} ${k} </div>
      `}).join(`
`);return`<div class="span"><h4>${$.group}</h4></div>${R}`}).join(`
`);console.log(`Parsing time of Jota parser is ${c} ms`),console.log(`Parsing time of BCV parser is ${l} ms`);const a=document.getElementById("grid");T||(T=a.innerHTML),a.innerHTML=T+g,document.getElementById("stat1").innerHTML+=`${w(!t)} ${D(t,1)}`,document.getElementById("stat2").innerHTML+=`${w(!s)} ${D(s,2)}`;const i=document.querySelector(`#locale option[value="${n}"]`);i.selected=!0;const u=document.querySelector("#locale select");u.addEventListener("change",()=>{H(u.value)});const d=document.querySelector("#tabs h3:nth-child(1)"),p=document.querySelector("#tabs h3:nth-child(2)");o?(d.classList.remove("selected"),p.classList.add("selected")):(d.classList.add("selected"),p.classList.remove("selected")),d.addEventListener("click",()=>{window.location.href="index.html"}),p.addEventListener("click",()=>{window.location.href="?common=true"}),X()}const Q=!!window.location.search.includes("common=true");H(x,Q);function X(){document.getElementById("text-input").addEventListener("input",n=>{const o=n.target.value,e=S(C.parse(o));M.parse(o);const r=M.osis();document.getElementById("output1").innerHTML=e,document.getElementById("output2").innerHTML=r;const t=e===r,s=document.getElementById("compare-output");s.innerHTML=`
      ${w(t)} Outputs of Jota and BCV parsers ${t?"are the same":"differ"}
    `,s.style.display=n.target.value?"block":"none"})}function w(n){return`<span class="${n?"success":"failure"}">${n?"&#x2714;":"&#x2718;"}</span>`}function D(n,o){const e=n?"failure":"success",r=n?` ${n} failure(s)`:" All good!";return performance.getEntriesByName("parsing"+o).reduce((t,s)=>t+s.duration,0),`<span class="${e}">${r}</span>`}function S(n){return n.map(e=>Array.isArray(e[0])?`${o(e[0])} - ${o(e[1])}`:o(e)).join(", ");function o(e){const r=e[2]?"."+e[2]:"",t=`${G[e[0]]}.${e[1]}`,s=e[3]?` - ${t}.${e[3]}`:"";return`${t}${r}${s}`}}
